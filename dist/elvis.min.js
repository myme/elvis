(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p={}.hasOwnProperty,q=[].slice,r=function(a,b){function c(){this.constructor=a}for(var d in b)p.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};e=this.document,g=function(a){return(null!=a?a.nodeType:void 0)&&a.nodeType===e.ELEMENT_NODE},h=function(a){return(null!=a?a.nodeType:void 0)&&a.nodeType===e.TEXT_NODE},i=function(a,b){var c,d,e;d={};for(c in a)p.call(a,c)&&(e=a[c],d[c]=e);for(c in b)p.call(b,c)&&(e=b[c],d[c]=e);return d},c=function(a){return"string"==typeof a||g(a)||h(a)||a instanceof f.Element},j=function(a){var b,d,e;return b={},d=[],e=a&&a.length,2===e?(b=a[0],d=a[1],d instanceof Array||(d=[d])):1===e&&(c(a[0])?d=[a[0]]:a[0]instanceof Array?d=a[0]:"object"==typeof a[0]&&(b=a[0])),[b,d]},l=function(a){var b,c,d,e,f,g,h,i;for(b={},h=a.split(","),f=0,g=h.length;g>f;f++)d=h[f],i=d.split("="),c=i[0],e=i[1],b[c]=e.replace(/^"(.*)"$/,"$1");return b},m=function(a){var b,c,d,e,f,g,h,j;if(e="div",b={},c=[],a){for(j=a.match(/\([^)]+\)|[.#]?(\w|-)+/g),g=0,h=j.length;h>g;g++)switch(d=j[g],d.substr(0,1)){case"#":b.id=d.substr(1);break;case".":c.push(d.substr(1));break;case"(":f=l(d.substr(1,d.length-2)),b=i(b,f);break;default:e=d}c.length&&(b.className=c.join(" "))}return[e,b]},this.elvis=f=function(){var a,b,c,d,h,k,l,n,o;return l=arguments[0],a=2<=arguments.length?q.call(arguments,1):[],n=j(a),b=n[0],c=n[1],g(l)?d=l:(o=m(l),h=o[0],k=o[1],b=i(k,b),d=e.createElement(h)),c.length&&(b.html=c),f.setAttr(d,b),d},f.Element=function(){function a(a){this.value=a}return a.prototype.getElement=function(){return n(this.value)},a.prototype.setAttr=function(a,b){return f.setAttr(a,b,this.value)},a}(),f.on=function(a,b,c){return a.addEventListener(b,c)},f.text=n=function(a){return e.createTextNode(a)},d={className:"className",id:"id",html:"innerHTML",text:"textContent",value:"value"},b={checked:!0,selected:!0,disabled:!0,readonly:!0,multiple:!0,ismap:!0,defer:!0,declare:!0,noresize:!0,nowrap:!0,noshade:!0,compact:!0},f.appendChildren=function(a,b){var c,d,g,h;if(b.length){for(d=e.createDocumentFragment(),g=0,h=b.length;h>g;g++)c=b[g],c&&(c instanceof Array?f.appendChildren(d,c):("string"==typeof c&&(c=new f.Element(c)),c instanceof f.Element&&(c=c.getElement()),d.appendChild(c)));return a.appendChild(d)}},f.css=function(a){var b,c,d,e;d=[];for(c in a)p.call(a,c)&&(e=a[c],"string"==typeof e?d.push(""+c+":"+e+";"):(b=f.css(e),d.push(""+c+"{"+b+"}")));return d.join("")},f.getAttr=function(a,b){var c;return c=d[b],c?a[c]:void 0},f.setAttr=function(){var a,c,e,h,i,j,k;if(h=arguments[0],a=2<=arguments.length?q.call(arguments,1):[],1===a.length){j=a[0],k=[];for(c in j)p.call(j,c)&&(i=j[c],k.push(f.setAttr(h,c,i)));return k}return c=a[0],i=a[1],i instanceof f.Element?i.setAttr(h,c):(e=d[c],b[c]?i?h[c]=!0:h.removeAttribute(c):e?"html"!==c||"string"==typeof i?h[e]=i:(h.innerHTML="",g(i)?h.appendChild(i):i instanceof Array?f.appendChildren(h,i):void 0):h.setAttribute(c,i))},a=function(a){function b(){return o=b.__super__.constructor.apply(this,arguments)}return r(b,a),b.prototype.toString=function(){return this.value},b.prototype.getElement=function(){var a,b;for(b=f("div",{html:this.value}).childNodes,a=e.createDocumentFragment();b.length;)a.appendChild(b[0]);return a},b}(f.Element),f.safe=function(){var b;return b=1<=arguments.length?q.call(arguments,0):[],function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(a,b,function(){})},k=null,f.infectString=function(){return k=String.prototype.safe,String.prototype.safe=function(){return f.safe(this.toString())}},f.restoreString=function(){return k?String.prototype.safe=k:delete String.prototype.safe,k=null}}).call(this);